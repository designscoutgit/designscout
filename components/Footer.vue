<template>
  <footer>
    <div class="container">
      <div class="row">
        <div class="footer-engagement col">
          <svg
            class="footer-logo"
            width="180"
            height="19"
            viewBox="0 0 180 19"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M8.84 13.97C7.25 15.4 5.47 15.69 3.35 15.69H1.94V2.51H3.35C5.4 2.51 7.16 2.77 8.75 4.12C10.25 5.38 11.01 7.21 11.01 9.1C11.01 10.99 10.27 12.69 8.84 13.97ZM10.06 2.8C8.01 1.12 5.88 0.79 3.28 0.79H0V17.4H3.23C5.95 17.4 8.03 17.07 10.1 15.31C12.01 13.68 12.94 11.54 12.94 9.12C12.94 6.7 12.04 4.43 10.06 2.8ZM17.25 0.79V17.4H26.27V15.68H19.19V9.16H26.06V7.44H19.19V2.51H26.27V0.79H17.25ZM36.83 7.88L35.68 7.4C34.5 6.89 32.96 6.23 32.96 4.8C32.96 3.28 34.3 2.22 35.84 2.22C37.38 2.22 38.15 2.88 38.84 4.03L40.38 3.08C39.46 1.45 37.82 0.5 35.88 0.5C33.3 0.5 31.01 2.15 31.01 4.73C31.01 7.11 32.76 8.1 34.79 8.98L35.85 9.42C37.46 10.13 39.06 10.79 39.06 12.72C39.06 14.65 37.35 15.96 35.48 15.96C33.61 15.96 32.25 14.57 32 12.88L30.11 13.39C30.66 15.97 32.74 17.69 35.53 17.69C38.55 17.69 41 15.46 41 12.56C41 9.92 39.08 8.84 36.82 7.89L36.83 7.88ZM45.49 17.41H47.43V0.8H45.49V17.4V17.41ZM61.96 9.06V10.78H67.13C67.13 13.86 63.95 15.98 60.92 15.98C59.1 15.98 57.25 15.08 55.98 13.86C54.69 12.6 53.95 10.93 53.95 9.17C53.95 5.43 57.09 2.23 61.06 2.23C63.62 2.23 65.58 3.4 67.03 5.36L68.44 4.1C66.59 1.81 64.13 0.51 61.08 0.51C56.07 0.51 52.01 4.39 52.01 9.15C52.01 13.91 56.07 17.7 60.96 17.7C63.38 17.7 65.8 16.69 67.4 14.92C68.99 13.16 69.25 11.31 69.2 9.06H61.96ZM73.91 17.41H75.85V4.6L89.42 18.15V0.79H87.48V13.66L73.93 0.09V17.4L73.91 17.41ZM101.83 7.43L100.67 6.94C99.31 6.35 98.27 5.83 98.27 4.81C98.27 3.51 99.47 2.74 100.62 2.74C101.77 2.74 102.48 3.18 103.16 4.29L103.44 4.75L105.87 3.26L105.63 2.85C104.63 1.04 102.81 0 100.68 0C97.6 0 95.28 2.04 95.28 4.74C95.28 7.44 97.3 8.55 99.38 9.46L100.51 9.93C102.25 10.69 103.33 11.24 103.33 12.74C103.33 14.24 101.96 15.47 100.28 15.47C98.77 15.47 97.55 14.38 97.32 12.82L97.23 12.25L94.28 13.04L94.38 13.5C94.99 16.36 97.33 18.2 100.32 18.2C103.68 18.2 106.32 15.72 106.32 12.56C106.32 9.4 104.1 8.38 101.83 7.43ZM119.39 0C114.1 0 109.79 4.11 109.79 9.16C109.79 14.21 114.1 18.19 119.39 18.19C121.33 18.19 123.28 17.58 124.89 16.46L125.11 16.31V12.54L124.21 13.4C122.84 14.71 121.06 15.46 119.32 15.46C115.78 15.46 112.79 12.54 112.79 9.09C112.79 5.64 115.76 2.72 119.27 2.72C121.08 2.72 122.87 3.47 124.19 4.77L125.1 5.67V1.88L124.89 1.73C123.26 0.57 121.45 0 119.38 0H119.39ZM138.16 15.47C134.52 15.47 131.56 12.61 131.56 9.1C131.56 5.59 134.52 2.73 138.16 2.73C141.8 2.73 144.76 5.59 144.76 9.1C144.76 12.61 141.8 15.47 138.16 15.47ZM138.16 0C132.87 0 128.57 4.09 128.57 9.12C128.57 14.15 132.87 18.19 138.16 18.19C143.45 18.19 147.75 14.12 147.75 9.12C147.75 4.12 143.45 0 138.16 0ZM161.6 10.94C161.6 12.11 161.6 13.32 160.87 14.17C160.19 14.94 158.99 15.46 157.86 15.46C156.66 15.46 155.39 14.9 154.78 14.08C154.12 13.21 154.12 12.02 154.12 10.87V0.29H151.12V11.19C151.12 13.02 151.26 14.78 152.99 16.35C154.22 17.5 156.04 18.19 157.86 18.19C159.81 18.19 161.66 17.44 162.92 16.14C164.47 14.62 164.59 12.99 164.59 11.19V0.29H161.59V10.94H161.6ZM168.27 0.29V3.02H172.47V17.91H175.47V3.02H179.72V0.29H168.28H168.27Z"
              fill="#F7F5F0"
            />
          </svg>

          <form
            v-if="!submitted"
            id="newsletter"
            name="newsletter"
            @submit.prevent="submitForm"
          >
            <input
              type="hidden"
              name="form-name"
              value="newsletter-signup"
            />
            <input
              type="email"
              v-model="email"
              name="email"
              placeholder="SUBSCRIBE TO OUR NEWSLETTER"
              required
            >
            <button
              type="submit"
              class="arrow"
            >
              <svg
                width="19"
                height="16"
                viewBox="0 0 19 16"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M18.7071 8.70711C19.0976 8.31658 19.0976 7.68342 18.7071 7.29289L12.3431 0.928931C11.9526 0.538407 11.3195 0.538407 10.9289 0.928931C10.5384 1.31946 10.5384 1.95262 10.9289 2.34314L16.5858 8L10.9289 13.6569C10.5384 14.0474 10.5384 14.6805 10.9289 15.0711C11.3195 15.4616 11.9526 15.4616 12.3431 15.0711L18.7071 8.70711ZM8.74228e-08 9L18 9L18 7L-8.74228e-08 7L8.74228e-08 9Z"
                  fill="#F7F5F0"
                />
              </svg>

            </button>
          </form>
          <div
            v-else
            id="newsletter_thanks"
          >
            <h5>THANK YOU FOR SIGNING UP FOR OUR NEWSLETTER!</h5>
          </div>
          <a
            href="#reel"
            class="watch-reel btn light"
          >
            <svg
              width="11"
              height="14"
              viewBox="0 0 11 14"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M11 7L0.499999 13.0622L0.5 0.937822L11 7Z"
                fill="#F7F5F0"
              />
            </svg>

            WATCH REEL
          </a>
        </div>
        <div class="footer-nav col">
          <FooterNav />
        </div>
      </div>
      <div class="row subfooter">
        <div class="col">
          <p class="disclaimer">&copy; DESIGNSCOUT. <br class="small-only" />ALL RIGHTS RESERVED.</p>
        </div>
        <div class="follow-us col">
          <h5 class="small-only">FOLLOW US</h5>
          <a
            href="https://vint.studio/"
            class="external-link"
            target="_blank"
          >
            <svg
              width="11"
              height="11"
              viewBox="0 0 11 11"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M11 1C11 0.447715 10.5523 -3.74211e-07 10 4.72575e-08L1 -1.63477e-07C0.447715 -1.63477e-07 2.8711e-07 0.447715 2.8711e-07 1C2.8711e-07 1.55228 0.447715 2 1 2L9 2L9 10C9 10.5523 9.44772 11 10 11C10.5523 11 11 10.5523 11 10L11 1ZM1.70711 10.7071L10.7071 1.70711L9.29289 0.292893L0.292893 9.29289L1.70711 10.7071Z"
                fill="#F7F5F0"
              />
            </svg>
            VINT
          </a>
          <a
            href="https://www.instagram.com/designscout/"
            class="external-link"
            target="_blank"
          >
            <svg
              width="11"
              height="11"
              viewBox="0 0 11 11"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M11 1C11 0.447715 10.5523 -3.74211e-07 10 4.72575e-08L1 -1.63477e-07C0.447715 -1.63477e-07 2.8711e-07 0.447715 2.8711e-07 1C2.8711e-07 1.55228 0.447715 2 1 2L9 2L9 10C9 10.5523 9.44772 11 10 11C10.5523 11 11 10.5523 11 10L11 1ZM1.70711 10.7071L10.7071 1.70711L9.29289 0.292893L0.292893 9.29289L1.70711 10.7071Z"
                fill="#F7F5F0"
              />
            </svg>
            INSTAGRAM
          </a>
          <a
            href="https://www.linkedin.com/company/designscout-ltd/"
            class="external-link"
            target="_blank"
          >
            <svg
              width="11"
              height="11"
              viewBox="0 0 11 11"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M11 1C11 0.447715 10.5523 -3.74211e-07 10 4.72575e-08L1 -1.63477e-07C0.447715 -1.63477e-07 2.8711e-07 0.447715 2.8711e-07 1C2.8711e-07 1.55228 0.447715 2 1 2L9 2L9 10C9 10.5523 9.44772 11 10 11C10.5523 11 11 10.5523 11 10L11 1ZM1.70711 10.7071L10.7071 1.70711L9.29289 0.292893L0.292893 9.29289L1.70711 10.7071Z"
                fill="#F7F5F0"
              />
            </svg>
            LINKEDIN
          </a>
        </div>
      </div>
    </div>
  </footer>
</template>

<script>
import FooterNav from "~/components/FooterNav.vue";
import { createClient } from "@supabase/supabase-js";

const supabase = createClient(
  "https://xnpxxlvywrcjtuqsjnun.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhucHh4bHZ5d3JjanR1cXNqbnVuIiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODMxMzIyNDcsImV4cCI6MTk5ODcwODI0N30.Y47OxVsjGtEhufJbma0rjRUDuJgo9FeOouNemhtSRV4"
);

export default {
  components: {
    FooterNav,
  },

  data() {
    return {
      showVideo: false,
      email: "",
      submitted: false,
    };
  },

  mounted() {
    this.moveFollowUs();

    window.addEventListener("resize", () => {
      this.moveFollowUs();
    });
  },

  methods: {
    async submitForm() {
      console.log("submitting!");
      if (!this.email) {
        return;
      }

      try {
        const { data, error } = await supabase
          .from("newsletter")
          .insert([{ email: this.email }]);

        if (error) {
          console.error(
            "Error submitting email to newsletter: ",
            error.message
          );
        } else {
          console.log("Successfully submitted newsletter signup!");
          this.email = "";
          this.submitted = true;
        }
      } catch (error) {
        console.error("Error submitting form: ", error.message);
      }
    },
    moveFollowUs() {
      const followUsContainer = document.querySelector(".follow-us");
      const footerNavContainer = document.querySelector(".footer-nav");
      const subfooterContainer = document.querySelector(".subfooter");

      if (window.innerWidth < 768) {
        footerNavContainer.appendChild(followUsContainer);
      } else {
        subfooterContainer.appendChild(followUsContainer);
      }
    },
  },
};
</script>